<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Appointments</title>
    <link rel="icon" type="image/x-icon" href="./assets/images/logo-icon.png">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="description" content="Health channelling web application">
    <meta name="keywords" content="doctor channelling,e channelling">
    <meta name="author" content="Nipun Dhananjaya">

    <link rel="stylesheet" href="assets/styles/normalize.css">
    <link rel="stylesheet" href="assets/styles/styles_appointments.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dosis&family=Lobster&family=Rubik:wght@700&family=Sigmar+One&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Dancing+Script&family=Dosis&family=Lobster&family=Pacifico&family=Rubik:wght@700&family=Sigmar+One&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
<header>
    <a href="index.html"><img src="/assets/images/logo.png" title="logo" alt="logo" width="100"></a>
    <nav>
        <!--<a href="index.html#quick">Quick Access</a>-->
        <a href="index.html#top-spec">Top Specialities</a>
        <a onclick="toMyAppointments()" target="_self">My Appointment</a>
    </nav>
    <button id="signIn-btn" type="button"  onclick="loadWindow()" class="btn btn-primary">Sign In</button>
    <h6 id="signIn_name">Guest</h6>
</header>

<table class="table table-striped appointments">
    <thead>
    <tr>
        <th scope="col" id="date">Date</th>
        <th scope="col" id="pName">Patient Name</th>
        <th scope="col" id="dName">Doctor Name</th>
        <th scope="col" id="spec">Specialization</th>
        <th scope="col" id="sessionTime">Session</th>
        <th scope="col" id="tele">Telephone</th>
    </tr>
    </thead>
    <tbody id="table-body">
    </tbody>
</table>

<footer>
    <img src="/assets/images/logo.png" alt="logo">
    <pre>
        Tele: +94 77 64 21 290

        Email: info@visityourdoctor.com

        Address: visit your doctor PLC,
                 No: 147,
                 W A D Ramanayake Mawatha,
                 Colombo 2,
                 Sri Lanka
    </pre>

</footer>
<script src="lib/jquary.min.js"></script>
<script type="module" src="./js/sign_in.js" ></script>
<script type="module" src="./js/my_appoinments.js" ></script>
<script>
    const queryString = window.location.search;
    console.log(queryString);
    const urlParams = new URLSearchParams(queryString);

    const email = urlParams.get('email');
    function loadWindow() {
        var fullPath = window.location.href;

        var fileName = fullPath.split("/").pop();

        if (document.getElementById('signIn-btn').textContent !== 'Loged In') {
            window.location.href = './sign_in.html?file='+encodeURIComponent(fileName);
        } else {
            alert('You are already Loged In!');
        }
    }
    function toMyAppointments() {
        window.location.href = './my_appointment.html?email='+ encodeURIComponent(email);
    }
</script>
</body>
</html>